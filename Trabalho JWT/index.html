<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/jsonwebtoken@8.5.1/dist/jwt.min.js"></script>

  <title>JWT App</title>
</head>
<body>
<div class="reader">
  <div class="container">
  <h1>Utilização de JsonWebToken (JWT)!</h1>
  </div>
</div>
<div class="container">
  <br>
  <div class="row">
      <div class="col">
        <form id="data-form">
        <label for="username">Username:</label><br>
        <input type="text" id="username" name="username"><br>
        <label for="email">Email:</label><br>
        <input type="text" id="email" name="email"><br><br>
        <button type="submit">Convert to JWT</button>
        <div id="convert">-texto convertido em jwt-</div>
      </form></div>
      <div class="col">
        <form id="jwt-form">
          <label for="jwt">JWT:</label><br>
          <input type="text" id="jwt" name="jwt"><br><br>
          <button type="submit">Decode JWT</button>
          <div id="revert">-jwt convertido em texto-</div>
        </form>
      </div>

  </div>
</div>
  

<script>

// Set the secret key for signing the JWT
var JWT_SECRET = "my-secret-key";

// Get references to the data and JWT forms
var dataForm = document.getElementById("data-form");
var jwtForm = document.getElementById("jwt-form");

// Handle the data form submit event
dataForm.addEventListener("submit", function(e) {
  e.preventDefault();

  // Get the data from the form
  var username = dataForm.username.value;
  var email = dataForm.email.value;

  // Construct the data object to encode in the JWT
  var data = {
    username: username,
    email: email
  };

  // Encode the data into a JWT and display it
  var jwt = encodeJWT(data, JWT_SECRET);
  var divconvert = document.getElementById("convert");
  divconvert.innerHTML = "Your JWT is: " + jwt;
});

// DEFINIR O ENCODEJWT;
// DEFINIR O ENCODEJWT;


// Handle the JWT form submit event
jwtForm.addEventListener("submit", function(e) {
  e.preventDefault();

  // Get the JWT from the form
  var jwt = jwtForm.jwt.value;

  // Decode the JWT and display the data it contains
  var data = decodeJWT(jwt, JWT_SECRET);
  var divrevert = document.getElementById("revert");
  divrevert.innerHTML = "Your data is: " + JSON.stringify(data);
});
</script>  
</body>
</html>